series: xenial
applications:
  zeppelin:
    charm: "cs:zeppelin-28"
    expose: true
    num_units: 1
    to:
      - "0"
  spark:
    charm: "cs:spark-52"
    num_units: 3
    options:
      spark_bench_enabled: true
    to:
      - "0"
      - "1"
      - "2"
  "getdata":
    charm: "/home/sebastien/qrama/charms/xenial/spark-job"
    options:
      job_location: "https://raw.githubusercontent.com/Qrama/spark-bundle/master/jobs/writedata.py"
  "validatedata":
    charm: "/home/sebastien/qrama/charms/xenial/spark-job"
    options:
      job_location: "https://raw.githubusercontent.com/Qrama/spark-bundle/master/jobs/transformdata.py"
  "notebook":
    charm: "/home/sebastien/qrama/charms/xenial/notebook"
    options:
      notebook_location: "https://raw.githubusercontent.com/Qrama/spark-bundle/master/spark-notebook.json"
relations:
  - - "zeppelin:spark"
    - "spark:client"
  - - "getdata:spark"
    - "spark:client"
  - - "validatedata:spark"
    - "spark:client"
  - - "notebook:zeppelin"
    - "zeppelin:juju-info"
machines:
  "0":
    series: xenial
    constraints: "arch=amd64 cpu-cores=1 cpu-power=138 mem=1700 root-disk=10240"
  "1":
    series: xenial
    constraints: "arch=amd64 cpu-cores=1 cpu-power=138 mem=1700 root-disk=10240"
  "2":
    series: xenial
    constraints: "arch=amd64 cpu-cores=1 cpu-power=138 mem=1700 root-disk=10240"
